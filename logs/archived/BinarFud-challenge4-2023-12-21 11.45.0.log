2023-12-21 23:45:07,779 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-21 23:45:08,313 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2023-12-21 23:45:08,466 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 18 ms
2023-12-21 23:45:08,939 ERROR i.a.c.s.j.AuthTokenFilter [http-nio-8080-exec-2] Invalid or missing Authorization header
2023-12-21 23:45:14,918 ERROR o.s.s.s.TaskUtils$LoggingErrorHandler [scheduling-1] Unexpected error occurred in scheduled task
org.springframework.mail.MailSendException: Mail server connection failed. Failed messages: jakarta.mail.MessagingException: Can't send command to SMTP host;
  nested exception is:
	java.net.SocketException: An established connection was aborted by the software in your host machine
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:448)
	at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:361)
	at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:356)
	at id.achfajar.challenge8.service.NotificationPromoImpl.sendToEmail(NotificationPromoImpl.java:79)
	at id.achfajar.challenge8.service.NotificationPromoImpl.sendPromo(NotificationPromoImpl.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1623)
Caused by: jakarta.mail.MessagingException: Can't send command to SMTP host
	at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:2480)
	at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:2467)
	at com.sun.mail.smtp.SMTPTransport.ehlo(SMTPTransport.java:1715)
	at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:773)
	at jakarta.mail.Service.connect(Service.java:342)
	at org.springframework.mail.javamail.JavaMailSenderImpl.connectTransport(JavaMailSenderImpl.java:518)
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:437)
	... 15 common frames omitted
Caused by: java.net.SocketException: An established connection was aborted by the software in your host machine
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:413)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:433)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:812)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1120)
	at java.base/sun.security.ssl.SSLSocketOutputRecord.deliver(SSLSocketOutputRecord.java:345)
	at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1304)
	at com.sun.mail.util.TraceOutputStream.write(TraceOutputStream.java:118)
	at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:125)
	at java.base/java.io.BufferedOutputStream.implFlush(BufferedOutputStream.java:252)
	at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:240)
	at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:2478)
	... 21 common frames omitted
2023-12-21 23:45:19,063 INFO i.a.c.s.NotificationPromoImpl [http-nio-8080-exec-2] Pesan notifikasi terkirim : dd8my88RhxnfK5DYbgB7XX:APA91bFpNmOyu_rZGkKkCVAUd6CtpHgb4cocXESPyVwSHDDan6ThF5SbxHGgFpcn6f-KLiT_zb6Af1ZVX2V2LMT4G6F5-q75NeRsxH8p0PIOMvbHpsDN-46KvDFU5W3NC02xcNGs6_xM, projects/synrgy-challenge/messages/89d651fd-d9d0-4327-aa6a-7f32a4b6a83c msg {
  "notification": {
    "title": "Promo Terbaru",
    "body": "Americano diskon sebesar 10%"
  },
  "token": "dd8my88RhxnfK5DYbgB7XX:APA91bFpNmOyu_rZGkKkCVAUd6CtpHgb4cocXESPyVwSHDDan6ThF5SbxHGgFpcn6f-KLiT_zb6Af1ZVX2V2LMT4G6F5-q75NeRsxH8p0PIOMvbHpsDN-46KvDFU5W3NC02xcNGs6_xM"
}
